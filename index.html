<!DOCTYPE html>
<html lang="ar" dir="rtl" id="htmlTag" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>شهريتي | إدارة الميزانية الشخصية</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* الأساسيات */
        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --success-color: #2ecc71;
            --warning-color: #f1c40f;
            --danger-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --text-color: #333;
            --bg-color: #f5f7fa;
            --card-bg: white;
            --border-color: #ddd;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --border-radius: 8px;
        }

        [data-theme="dark"] {
            --bg-color: #1a1a2e;
            --text-color: #f1f1f1;
            --card-bg: #16213e;
            --border-color: #2d4059;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --primary-color: #4a89dc;
            --secondary-color: #e6e6e6;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Tajawal', Arial, sans-serif;
        }
        body {
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            transition: all 0.3s ease;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* الشريط العلوي */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo svg {
            height: 40px;
            width: auto;
        }

        .logo-text {
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--secondary-color);
        }

        .auth-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: var(--border-radius);
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
        }

        /* الصفحة الرئيسية */
        .hero {
            text-align: center;
            padding: 60px 0;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: var(--secondary-color);
        }

        .hero h1 span {
            color: var(--primary-color);
        }

        .hero p {
            font-size: 1.2rem;
            color: var(--text-color);
            opacity: 0.8;
            max-width: 700px;
            margin: 0 auto 30px;
        }

        /* خيارات الصفحة الرئيسية */
        .home-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .option-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid var(--border-color);
        }

        .option-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px var(--shadow-color);
        }

        .option-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .option-card h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        /* روابط التواصل الاجتماعي */
        .social-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
        }

        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .social-link:hover {
            transform: scale(1.2);
        }

        .facebook {
            color: #1877F2;
            background-color: rgba(24, 119, 242, 0.1);
        }

        .twitter {
            color: #1DA1F2;
            background-color: rgba(29, 161, 242, 0.1);
        }

        .telegram {
            color: #0088CC;
            background-color: rgba(0, 136, 204, 0.1);
        }

        .email {
            color: #D44638;
            background-color: rgba(212, 70, 56, 0.1);
        }

        .social-link svg {
            width: 20px;
            height: 20px;
        }

        /* حاسبة الميزانية */
        .calculator {
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px var(--shadow-color);
            margin: 30px auto;
            border: 1px solid var(--border-color);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--secondary-color);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: border-color 0.3s;
            background-color: var(--card-bg);
            color: var(--text-color);
        }

        select.form-control {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 15px;
        }

        .calculate-btn {
            background: linear-gradient(135deg, var(--primary-color), #2980b9);
            color: white;
            padding: 15px 30px;
            font-size: 1.1rem;
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
            display: block;
        }

        /* النتائج */
        .result {
            margin-top: 30px;
            padding: 25px;
            background-color: var(--light-color);
            border-radius: var(--border-radius);
            display: none;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .highlight {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .advice-box {
            margin-top: 15px;
            padding: 15px;
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary-color);
        }

        /* أزرار التحكم */
        .control-buttons {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .control-btn {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 5px var(--shadow-color);
            transition: all 0.3s;
        }

        .control-btn:hover {
            transform: scale(1.1);
        }

        /* تجاوب */
        @media (max-width: 768px) {
            .top-bar {
                flex-direction: column;
                gap: 15px;
            }
            
            .auth-buttons {
                width: 100%;
                justify-content: center;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .home-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- شريط التنقل العلوي -->
    <div class="container top-bar">
        <div class="logo">
            <svg viewBox="0 0 300 100" xmlns="http://www.w3.org/2000/svg">
                <path fill="#3498db" d="M150,20 Q180,40 150,60 Q120,40 150,20 Z"/>
                <text x="150" y="40" font-size="28" text-anchor="middle" fill="#2c3e50" font-family="Tajawal">شهريتي</text>
                <text x="150" y="80" font-size="20" text-anchor="middle" fill="#f1c40f" font-family="Montserrat">Shahryati</text>
            </svg>
            <span class="logo-text">شهريتي</span>
        </div>
        <div class="auth-buttons" id="authButtons">
            <button class="btn btn-outline" onclick="showAuthForm('login')" data-translate="loginBtn">تسجيل الدخول</button>
            <button class="btn btn-primary" onclick="showAuthForm('register')" data-translate="registerBtn">إنشاء حساب</button>
        </div>
        <div class="user-menu" id="userMenu" style="display: none;">
            <span id="usernameDisplay"></span>
            <button class="btn btn-outline" onclick="logout()" data-translate="logoutBtn">تسجيل الخروج</button>
        </div>
    </div>

    <!-- المحتوى الرئيسي -->
    <div class="container">
        <!-- الصفحة الرئيسية -->
        <div id="homePage">
            <div class="hero">
                <h1 data-translate="welcomeTitle">مرحباً بك في <span>شهريتي</span></h1>
                <p data-translate="welcomeSubtitle">أداة متكاملة لإدارة ميزانيتك الشخصية وتتبع نفقاتك الشهرية بكل سهولة</p>
                
                <!-- خيارات الصفحة الرئيسية -->
                <div class="home-options">
                    <div class="option-card" onclick="startCalculator()">
                        <div class="option-icon">🧮</div>
                        <h3 data-translate="calculatorOption">حاسبة الميزانية</h3>
                        <p data-translate="calculatorDesc">احسب دخلك ونفقاتك الشهرية</p>
                    </div>
                    
                    <div class="option-card" onclick="showAuthForm('register')">
                        <div class="option-icon">👤</div>
                        <h3 data-translate="registerOption">إنشاء حساب</h3>
                        <p data-translate="registerDesc">احفظ بياناتك وعدّل ميزانيتك لاحقاً</p>
                    </div>
                    
                    <div class="option-card" onclick="showComingSoon()">
                        <div class="option-icon">📊</div>
                        <h3 data-translate="reportsOption">التقارير</h3>
                        <p data-translate="reportsDesc">تحليل إنفاقك الشهري</p>
                    </div>
                </div>
                
                <!-- روابط التواصل الاجتماعي -->
                <div class="social-links">
                    <a href="https://www.facebook.com/share/1EFVPngspR/" class="social-link facebook" title="Facebook" target="_blank">
                        <svg width="24" height="24" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.85C10.44 7.34 11.93 5.96 14.22 5.96C15.31 5.96 16.45 6.15 16.45 6.15V8.62H15.19C13.95 8.62 13.56 9.39 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96A10 10 0 0 0 22 12.06C22 6.53 17.5 2.04 12 2.04Z"/>
                        </svg>
                    </a>

                    <a href="https://x.com/@shahryati" class="social-link twitter" title="X (Twitter)" target="_blank">
                        <svg width="24" height="24" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M22.46 6c-.77.35-1.6.58-2.46.69c.88-.53 1.56-1.37 1.88-2.38c-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29c0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15c0 1.49.75 2.81 1.91 3.56c-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07a4.28 4.28 0 0 0 4 2.98a8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21C16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56c.84-.6 1.56-1.36 2.14-2.23Z"/>
                        </svg>
                    </a>

                    <a href="https://t.me/shahryati_finance" class="social-link telegram" title="Telegram" target="_blank">
                        <svg width="24" height="24" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19c-.14.75-.42 1-.68 1.03c-.58.05-1.02-.38-1.58-.75c-.88-.58-1.38-.94-2.23-1.5c-.99-.65-.35-1.01.22-1.59c.15-.15 2.71-2.48 2.76-2.69c.03-.1.06-.22-.1-.22-.1-.02-.21-.03-.3.1-.2.25-.76.81-1.51 1.47c-.54.48-.94.72-1.27.9c-.47.25-1.02.38-.98.8c.03.35.52.5 1.42.69c1.07.22 2.04.34 2.55.43c.83.14 1.93.17 2.57.07c.78-.13 1.82-.66 2.07-1.23c.26-.58.26-1.07.18-1.23c-.07-.16-.26-.25-.57-.43c-.25-.14-1.47-.74-1.69-.82c-.28-.11-.5-.17-.71.17c-.2.33-.77 1.13-.94 1.36c-.16.23-.33.26-.61.16c-.37-.13-1.12-.42-2.13-1.35c-.79-.72-1.33-1.6-1.48-1.87c-.15-.28-.02-.43.11-.57c.11-.11.25-.29.37-.43c.13-.14.17-.24.26-.4c.08-.17.04-.31-.02-.43c-.06-.11-.56-1.35-.77-1.84c-.2-.48-.4-.42-.56-.43c-.14 0-.3-.01-.47-.01c-.17 0-.45.06-.68.28c-.24.23-.92.9-.92 2.19c0 1.3.95 2.54 1.08 2.71c.12.17 1.88 2.86 4.56 4.08c.63.29 1.12.46 1.51.59c.63.21 1.2.19 1.65.11c.51-.08 1.57-.64 1.79-1.26c.22-.62.22-1.15.15-1.26c-.07-.1-.23-.16-.48-.27z"/>
                        </svg>
                    </a>

                    <a href="mailto:shahryatifinancelive@gmail.com" class="social-link email" title="Email" target="_blank">
                        <svg width="24" height="24" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M20 4H4C2.9 4 2 4.9 2 6v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2Zm0 4-8 5-8-5V6l8 5 8-5v2Z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>

        <!-- حاسبة الميزانية -->
        <div id="calculatorPage" style="display: none;">
            <div class="calculator">
                <h2 data-translate="calculatorTitle">حاسبة الميزانية الشهرية</h2>
                
                <div class="form-group">
                    <label for="currency" data-translate="currencyLabel">العملة:</label>
                    <select id="currency" class="form-control" onchange="updateCurrencySymbol()">
                        <option value="SAR">ريال سعودي (SAR)</option>
                        <option value="USD">دولار أمريكي (USD)</option>
                        <option value="EUR">يورو (EUR)</option>
                        <option value="AED">درهم إماراتي (AED)</option>
                        <option value="EGP">جنيه مصري (EGP)</option>
                        <option value="QAR">ريال قطري (QAR)</option>
                        <option value="DZD">دينار جزائري (DZD)</option>
                        <option value="TND">دينار تونسي (TND)</option>
                        <option value="MAD">درهم مغربي (MAD)</option>
                        <option value="LYD">دينار ليبي (LYD)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="income" data-translate="incomeLabel">الدخل الشهري (<span class="currency-symbol">ريال</span>):</label>
                    <input type="number" id="income" class="form-control" placeholder="أدخل إجمالي دخلك الشهري">
                </div>
                
                <h3 data-translate="expensesLabel">النفقات الثابتة:</h3>
                <div class="form-group">
                    <label for="rent" data-translate="rentLabel">الإيجار/الرهن العقاري:</label>
                    <input type="number" id="rent" class="form-control" placeholder="المبلغ الشهري">
                </div>
                
                <div class="form-group">
                    <label for="utilities" data-translate="utilitiesLabel">المرافق (كهرباء، ماء، إلخ):</label>
                    <input type="number" id="utilities" class="form-control" placeholder="المبلغ الشهري">
                </div>
                
                <div class="form-group">
                    <label for="transportation" data-translate="transportationLabel">المواصلات:</label>
                    <input type="number" id="transportation" class="form-control" placeholder="المبلغ الشهري">
                </div>
                
                <div class="form-group">
                    <label for="food" data-translate="foodLabel">الطعام والمشروبات:</label>
                    <input type="number" id="food" class="form-control" placeholder="المبلغ الشهري">
                </div>
                
                <div class="form-group">
                    <label for="other" data-translate="otherLabel">نفقات أخرى:</label>
                    <input type="number" id="other" class="form-control" placeholder="المبلغ الشهري">
                </div>
                
                <button class="btn btn-primary calculate-btn" onclick="calculateBudget()" data-translate="calculateBtn">حساب الميزانية</button>
                
                <div id="result" class="result">
                    <h3 data-translate="summaryTitle">ملخص الميزانية</h3>
                    <div class="summary-item">
                        <span data-translate="totalIncome">إجمالي الدخل:</span>
                        <span id="total-income">0 <span class="currency-symbol">ريال</span></span>
                    </div>
                    <div class="summary-item">
                        <span data-translate="totalExpenses">إجمالي النفقات:</span>
                        <span id="total-expenses">0 <span class="currency-symbol">ريال</span></span>
                    </div>
                    <div class="summary-item highlight">
                        <span data-translate="savingsLabel">المدخرات/العجز:</span>
                        <span id="savings">0 <span class="currency-symbol">ريال</span></span>
                    </div>
                    <div id="advice" class="advice-box">
                        <h4 data-translate="adviceTitle">نصائح مالية</h4>
                        <p id="adviceText">أدخل بياناتك للحصول على نصائح مخصصة</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- أزرار التحكم -->
    <div class="control-buttons">
        <button class="control-btn" onclick="toggleTheme()" id="themeBtn" title="وضع الليل">
            <span id="themeIcon">🌙</span>
        </button>
        <button class="control-btn" onclick="toggleLanguage()" id="languageBtn" title="تغيير اللغة">
            <span id="languageIcon">EN</span>
        </button>
    </div>

    <!-- نماذج المصادقة -->
    <div id="authModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div class="auth-form" id="loginForm">
            <h2 data-translate="loginTitle">تسجيل الدخول</h2>
            <div class="form-group">
                <label for="loginEmail" data-translate="emailLabel">البريد الإلكتروني:</label>
                <input type="email" id="loginEmail" class="form-control" placeholder="أدخل بريدك الإلكتروني">
            </div>
            <div class="form-group">
                <label for="loginPassword" data-translate="passwordLabel">كلمة المرور:</label>
                <input type="password" id="loginPassword" class="form-control" placeholder="أدخل كلمة المرور">
            </div>
            <button class="btn btn-primary" onclick="login()" data-translate="loginBtn">تسجيل الدخول</button>
            <p style="margin-top: 15px; text-align: center;">
                <a href="#" onclick="showAuthForm('register')" data-translate="noAccount">ليس لديك حساب؟ سجل الآن</a>
            </p>
        </div>

        <div class="auth-form" id="registerForm" style="display: none;">
            <h2 data-translate="registerTitle">إنشاء حساب جديد</h2>
            <div class="form-group">
                <label for="registerName" data-translate="nameLabel">الاسم الكامل:</label>
                <input type="text" id="registerName" class="form-control" placeholder="أدخل اسمك الكامل">
            </div>
            <div class="form-group">
                <label for="registerEmail" data-translate="emailLabel">البريد الإلكتروني:</label>
                <input type="email" id="registerEmail" class="form-control" placeholder="أدخل بريدك الإلكتروني">
            </div>
            <div class="form-group">
                <label for="registerPassword" data-translate="passwordLabel">كلمة المرور:</label>
                <input type="password" id="registerPassword" class="form-control" placeholder="أدخل كلمة المرور">
            </div>
            <div class="form-group">
                <label for="confirmPassword" data-translate="confirmPasswordLabel">تأكيد كلمة المرور:</label>
                <input type="password" id="confirmPassword" class="form-control" placeholder="أعد إدخال كلمة المرور">
            </div>
            <button class="btn btn-primary" onclick="register()" data-translate="registerBtn">إنشاء حساب</button>
            <p style="margin-top: 15px; text-align: center;">
                <a href="#" onclick="showAuthForm('login')" data-translate="haveAccount">لديك حساب بالفعل؟ سجل الدخول</a>
            </p>
        </div>
    </div>

    <script>
        // وظائف التطبيق الأساسية
        function toggleTheme() {
            const htmlTag = document.getElementById('htmlTag');
            const currentTheme = htmlTag.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            htmlTag.setAttribute('data-theme', newTheme);
            document.getElementById('themeIcon').textContent = newTheme === 'light' ? '🌙' : '☀️';
            localStorage.setItem('theme', newTheme);
        }

        function toggleLanguage() {
            const currentLang = document.documentElement.lang;
            const newLang = currentLang === 'ar' ? 'en' : 'ar';
            document.documentElement.lang = newLang;
            document.documentElement.dir = newLang === 'ar' ? 'rtl' : 'ltr';
            document.getElementById('languageIcon').textContent = newLang === 'ar' ? 'EN' : 'AR';
            // هنا يمكنك إضافة وظيفة لترجمة المحتوى
        }

        function showAuthForm(formType) {
            document.getElementById('authModal').style.display = 'flex';
            document.getElementById('loginForm').style.display = formType === 'login' ? 'block' : 'none';
            document.getElementById('registerForm').style.display = formType === 'register' ? 'block' : 'none';
        }

        function hideAuthForm() {
            document.getElementById('authModal').style.display = 'none';
        }

        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            // هنا يمكنك إضافة منطق تسجيل الدخول الحقيقي
            console.log('تسجيل الدخول بمعلومات:', email, password);
            
            // لمثالنا، سنفترض أن تسجيل الدخول ناجح
            document.getElementById('authButtons').style.display = 'none';
            document.getElementById('userMenu').style.display = 'flex';
            document.getElementById('usernameDisplay').textContent = email;
            hideAuthForm();
        }

        function register() {
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (password !== confirmPassword) {
                alert('كلمة المرور غير متطابقة');
                return;
            }
            
            // هنا يمكنك إضافة منطق التسجيل الحقيقي
            console.log('إنشاء حساب بمعلومات:', name, email, password);
            
            // لمثالنا، سنفترض أن التسجيل ناجح ونقوم بتسجيل الدخول تلقائياً
            document.getElementById('authButtons').style.display = 'none';
            document.getElementById('userMenu').style.display = 'flex';
            document.getElementById('usernameDisplay').textContent = name || email;
            hideAuthForm();
        }

        function logout() {
            document.getElementById('authButtons').style.display = 'flex';
            document.getElementById('userMenu').style.display = 'none';
        }

        function startCalculator() {
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('calculatorPage').style.display = 'block';
        }

        function showComingSoon() {
            alert('هذه الميزة قيد التطوير، ستكون متاحة قريباً!');
        }

        function calculateBudget() {
            const currency = document.getElementById('currency').value;
            const income = parseFloat(document.getElementById('income').value) || 0;
            const rent = parseFloat(document.getElementById('rent').value) || 0;
            const utilities = parseFloat(document.getElementById('utilities').value) || 0;
            const transportation = parseFloat(document.getElementById('transportation').value) || 0;
            const food = parseFloat(document.getElementById('food').value) || 0;
            const other = parseFloat(document.getElementById('other').value) || 0;
            
            const totalExpenses = rent + utilities + transportation + food + other;
            const savings = income - totalExpenses;
            
            document.getElementById('total-income').textContent = income.toFixed(2) + ' ' + getCurrencySymbol(currency);
            document.getElementById('total-expenses').textContent = totalExpenses.toFixed(2) + ' ' + getCurrencySymbol(currency);
            document.getElementById('savings').textContent = savings.toFixed(2) + ' ' + getCurrencySymbol(currency);
            
            let advice = '';
            if (savings > 0) {
                advice = 'ممتاز! لديك فائض مالي هذا الشهر. حاول توفير 20% على الأقل من دخلك.';
            } else if (savings < 0) {
                advice = 'لديك عجز مالي هذا الشهر. حاول تقليل النفقات غير الضرورية.';
            } else {
                advice = 'دخلك يساوي نفقاتك بالضبط. حاول توفير ولو مبلغ بسيط كل شهر.';
            }
            
            document.getElementById('adviceText').textContent = advice;
            document.getElementById('result').style.display = 'block';
        }

        function updateCurrencySymbol() {
            const currency = document.getElementById('currency').value;
            const symbols = document.querySelectorAll('.currency-symbol');
            symbols.forEach(symbol => {
                symbol.textContent = getCurrencySymbol(currency);
            });
        }

        function getCurrencySymbol(currency) {
            const symbols = {
                'SAR': 'ريال',
                'USD': '$',
                'EUR': '€',
                'AED': 'درهم',
                'EGP': 'جنيه',
                'QAR': 'ريال',
                'DZD': 'دينار',
                'TND': 'دينار',
                'MAD': 'درهم',
                'LYD': 'دينار'
            };
            return symbols[currency] || currency;
        }

        // تهيئة التطبيق عند التحميل
        document.addEventListener('DOMContentLoaded', function() {
            // استعادة الوضع المظلم إذا كان مفعلًا
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.getElementById('htmlTag').setAttribute('data-theme', savedTheme);
            document.getElementById('themeIcon').textContent = savedTheme === 'light' ? '🌙' : '☀️';
            
            // إغلاق نموذج المصادقة عند النقر خارج النموذج
            document.getElementById('authModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideAuthForm();
                }
            });
        });
    </script>
</body>
</html>